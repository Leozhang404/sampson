!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.probably=t.probably||{})}(this,function(t){"use strict";function r(t,r){if(r>t)return NaN;for(var e=1,n=1;r>=n;n++)e*=t--,e/=n;return e}function e(t){return 0>t?NaN:0==t?1:t*e(t-1)}function n(t){if(0>t)return NaN;for(var r=N[0],e=N.length-1;e>0;--e)r+=N[e]/(t+e);var n=t+w+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(r)-Math.log(t)}function o(t){var r=t;if(0>r&&r%1==0)return 1/0;if(.5>r)return Math.PI/(Math.sin(Math.PI*r)*o(1-r));if(r>100)return Math.exp(n(r));r-=1;for(var e=z[0],a=1;k+2>a;a++)e+=z[a]/(r+a);var i=r+k+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,r+.5)*Math.exp(-i)*e}function a(t){if(0==t.length)return 0;var r=0;return t.reduce(function(t,e){var n=e-r,o=t+n;return r=o-t-n,o},0)}function i(t){return 0==t.length?NaN:a(t)/t.length}function u(t){if(0==t.length)return NaN;if(1==t.length)return t;var r=function(){var r=t.reduce(function(t,r){return t[r]?t[r]++:t[r]=1,t},{}),e=Object.keys(r),n=e.map(function(t){return r[t]}).reduce(function(t,r){return r>t?r:t});return{v:e.filter(function(t){return r[t]==n}).map(function(t){return Number(t)})}}();return"object"===("undefined"==typeof r?"undefined":b["typeof"](r))?r.v:void 0}function s(t,r,e,n){var o=t.slice(0);if(0==o.length||r>=o.length)return NaN;var a=e||0,i=n||o.length-1;if(a==i)return o[a];for(;i>a;){if(i-a>q){var u=i-a+1,f=r-a+1,l=Math.log(u),h=D*Math.exp(2*l/3),v=D*Math.sqrt(l*h*(u-h)/u),d=Math.max(a,Math.floor(r-f*h/u+v)),p=Math.min(i,Math.floor(r+(u-f)*h/u+v));s(o,r,d,p)}var m=o[r],y=a,M=i;for(c(o,y,r),o[M]>m&&c(o,y,M);M>y;){for(c(o,y,M),y++,M--;o[y]<m;)y++;for(;o[M]>m;)M--}o[a]===m?c(o,a,M):(M++,c(o,M,i)),M>r?i=M-1:(a=M+1,i=M-1)}return o[r]}function c(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function f(t){var r=void 0;if(0==t.length)r=NaN;else{var e=t.length%2==0;e?(r=s(t,t.length/2),r+=s(t,t.length/2-1),r/=2):r=s(t,(t.length-1)/2)}return r}function l(t,r){if(void 0==r||r>1||0>r)throw new Error("p must be between zero and one inclusive.");if(void 0==t)throw new Error("need a list to provide a percentile.");if(0==t.length)return NaN;var e=Math.floor(t.length*r);return e>=t.length&&(e=t.length-1),s(t,e)}function h(t){if(void 0==t||0==t.length)throw new Error("you must provide an array.");for(var r=arguments.length,e=Array(r>1?r-1:0),n=1;r>n;n++)e[n-1]=arguments[n];var o=e.reduce(function(t,r){return r>=0&&1>=r&&t},!0);if(!o)throw new Error("quantiles must be between zero and one inclusive.");if(e.length>1)return e.map(function(r){return h(t,r)});var a=e[0];if(0==a)return t[0];if(1==a)return t[t.length-1];var i=t.length*a;return i%1?s(t,Math.floor(i)):t.length%2?s(t,i):(s(t,i-1)+s(t,i))/2}function v(t){return Math.max.apply(Math,b.toConsumableArray(t))-Math.min.apply(Math,b.toConsumableArray(t))}function d(t,r,e){if(0==t.length)return NaN;var n=function(){var n=i(t);return{v:t.reduce(function(t,o){var a=o-n;return e&&(a=Math.abs(a)),t+Math.pow(a,r)},0)}}();return"object"===("undefined"==typeof n?"undefined":b["typeof"](n))?n.v:void 0}function p(t){return 0==t.length?NaN:d(t,2)/t.length}function m(t){var r=p(t);return isNaN(r)?0:Math.sqrt(r)}function y(t){return(t+.5)*Math.log(t)-t+Math.log(2*Math.PI)/2}function M(t,r,e){return(t-r)/e}function g(t,r,e){if(!t)return NaN;if(r){var n=e||0,o=((t.size-1)*t.variance+(r.size-1)*r.variance)/(t.size+r.size-2);return(t.mean-r.mean-n)/Math.sqrt(o*(1/t.size+1/r.size))}return(t.mean-e)/(t.std/Math.sqrt(t.size))}var b={};b["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},b.classCallCheck=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},b.createClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),b.inherits=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)},b.possibleConstructorReturn=function(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r},b.toConsumableArray=function(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)};var w=607/128,N=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],k=7,z=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],q=600,D=.5,C=Object.freeze({choose:r,factorial:e,gamma:o,lngamma:n,median:f,mean:i,mode:u,percentile:l,quantile:h,range:v,select:s,std:m,stirling:y,sum:a,sumNthPowerDev:d,variance:p,zscore:M}),j=14,E=function(){function t(r,e){if(b.classCallCheck(this,t),S.call(this),void 0==r||r>1||0>r)throw new Error("p must be between 0 and 1.");if(void 0==e||0>e)throw new Error("n must be positive or zero.");this.p=r,this.n=e,this.mu=e*r,this.variance=e*r*(1-r)}return b.createClass(t,null,[{key:"random",value:function(t,r){if("number"!=typeof t||t>1||0>t)throw new Error("p must be between 0 and 1.");if("number"!=typeof r||0>r)throw new Error("n must be positive or zero.");if(0==r)return 0;var e=!1,n=0,o=void 0;t>.5?(e=!0,o=1-t):o=t;var a=1-o,i=o/a,u=r*o;if(j>u)for(var s=Math.pow(a,r),c=Math.random();r>=n&&c>=s;)c-=s,s*=i*(r-n)/(n+1),n++;else!function(){var t=u+o,e=Math.floor(t),i=e+.5,s=u*a,c=Math.floor(2.195*Math.sqrt(s)-4.6*a)+.5,f=i-c,l=i+c,h=.134+20.5/(15.3+e),v=c*(1+h+h),d=(t-f)/(t-f*o),p=d*(1+.5*d),m=(l-t)/(l*a),M=m*(1.5+m),g=v+h/p,b=g+h/M,w=void 0,N=void 0,k=void 0,z=void 0,q=function D(){if(k=Math.random()*b,z=Math.random(),c>=k)n=Math.floor(i-c*z+k);else if(v>=k){var t=f+(k-c)/h;z=z*h+1-Math.abs(t-i)/c,z>1||0>=z?D():n=t}else g>=k?(n=Math.floor(f+Math.log(z)/p),z*=(k-v)*p):(n=Math.floor(l-Math.log(z)/M),z*=(k-g)*M);w=Math.log(z);var u=n+1,s=r-n-1,d=e+1,m=r+1-e;N=i*Math.log(d/u)+(r-e+.5)*Math.log(m/s)+(n-e)*Math.log(s*o/(u*a))+y(d)+y(m)-y(u)-y(s),w>N&&D()};q()}();return Math.floor(e?r-n:n)}},{key:"pmf",value:function(t,e,n){if(0>t||t>n)return 0;var o=void 0;if(0==e)o=0==t?1:0;else{if(1!=e){var a=r(n,t),i=Math.pow(e,t)*Math.pow(1-e,n-t);return"Infinity"==a?0==i?0:a:a*i}o=t==n?1:0}return o}}]),t}();E.covariates=2,E.discrete=!0;var S=function(){var t=this;this.pdf=function(r){return t.constructor.pmf(r,t.p,t.n)},this.random=function(){return t.constructor.random(t.p,t.n)},this.sample=function(r){return Array.apply(null,Array(r)).map(function(){return t.random()})}},A=function(t){function r(t){b.classCallCheck(this,r);var e=b.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this,t,1));return e.pdf=function(t){return e.constructor.pmf(t,e.p)},e.random=function(){return e.constructor.random(e.p)},e.sample=function(t){return Array.apply(null,Array(t)).map(function(){return e.random()})},e}return b.inherits(r,t),b.createClass(r,null,[{key:"random",value:function(t){if(void 0==t||0>t||t>1)throw new Error("p must be between zero and one inclusive.");var r=Math.random();return t>r?1:0}},{key:"pmf",value:function(t,r){return 0==t?1-r:1==t?r:0}}]),r}(E);A.covariates=1;var O=Object.freeze({Binomial:E,Bernoulli:A}),P=function(){function t(r){var e=this;if(b.classCallCheck(this,t),this.covariance=function(t){return e.constructor.covariance(e,t)},this.correlation=function(t){return e.constructor.correlation(e,t)},0==r.length)throw new Error("Sample of size 0 not allowed.");this.data=r,this.size=r.length,this.mean=i(r),this.std=this.constructor.stdDev(r),this.variance=this.constructor.variance(r),this.skewness=this.constructor.skewness(r),this.kurtosis=this.constructor.kurtosis(r),this.sqrdMeanDev=this.constructor.sqrdMeanDev(r),this.meanDev=this.constructor.meanDev(r),this.rootMeanSqrd=this.constructor.rootMeanSqrd(r),this.stdMeanDev=this.constructor.stdMeanDev(r),this.relStdDev=this.constructor.relativeStdDev(r),this.quartiles=this.constructor.quartiles(r)}return b.createClass(t,null,[{key:"variance",value:function(t){return d(t,2)/(t.length-1)}},{key:"sqrdMeanDev",value:function(t){return d(t,2)}},{key:"meanDev",value:function(t){return d(t,1,!0)/t.length}},{key:"stdDev",value:function(t){var r=this.variance(t);return isNaN(r)?0:Math.sqrt(r)}},{key:"rootMeanSqrd",value:function(t){return Math.sqrt(t.map(function(t){return t*t}).reduce(function(t,r){return t+r})/t.length)}},{key:"stdMeanDev",value:function(t){return this.stdDev(t)/Math.sqrt(t.length)}},{key:"relativeStdDev",value:function(t){return this.stdDev(t)/i(t)}},{key:"quartiles",value:function(t){return h(t,.25,.5,.75)}},{key:"skewness",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var e=t.length,n=Math.pow(r,3),o=d(t,3);return e*o/((e-1)*(e-2)*n)}},{key:"kurtosis",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var e=(t.length,d(t,2)),n=d(t,4);return n/Math.pow(e,2)}},{key:"covariance",value:function(t,r){if(!t||!r||t.size<=1||t.size!==r.size)return NaN;var e=t.data.map(function(e,n){return(t.data[n]-t.mean)*(r.data[n]-r.mean)}).reduce(function(t,r){return t+r},0);return e/(t.size-1)}},{key:"correlation",value:function(t,r){if(!(t&&t.std&&r&&r.std))return NaN;var e=this.covariance(t,r);return e/t.std/r.std}}]),t}(),x=Object.freeze({Sample:P,tTest:g});t.distributions=O,t.statistics=x,t.utils=C});