!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.probably=t.probably||{})}(this,function(t){"use strict";function r(t,r){if(r>t)return NaN;for(var n=1,e=1;r>=e;e++)n*=t--,n/=e;return n}function n(t){return 0>t?NaN:0==t?1:t*n(t-1)}function e(t){if(0>t)return NaN;for(var r=b[0],n=b.length-1;n>0;--n)r+=b[n]/(t+n);var e=t+w+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(e)-e+Math.log(r)-Math.log(t)}function o(t){var r=t;if(0>r&&r%1==0)return 1/0;if(.5>r)return Math.PI/(Math.sin(Math.PI*r)*o(1-r));if(r>100)return Math.exp(e(r));r-=1;for(var n=N[0],a=1;k+2>a;a++)n+=N[a]/(r+a);var u=r+k+.5;return Math.sqrt(2*Math.PI)*Math.pow(u,r+.5)*Math.exp(-u)*n}function a(t){if(0==t.length)return 0;var r=0;return t.reduce(function(t,n){var e=n-r,o=t+e;return r=o-t-e,o},0)}function u(t){return 0==t.length?NaN:a(t)/t.length}function i(t){if(0==t.length)return NaN;if(1==t.length)return t;var r=function(){var r=t.reduce(function(t,r){return t[r]?t[r]++:t[r]=1,t},{}),n=Object.keys(r),e=n.map(function(t){return r[t]}).reduce(function(t,r){return r>t?r:t});return{v:n.filter(function(t){return r[t]==e}).map(function(t){return Number(t)})}}();return"object"===("undefined"==typeof r?"undefined":g["typeof"](r))?r.v:void 0}function s(t,r,n,e){var o=t.slice(0);if(0==o.length||r>=o.length)return NaN;var a=n||0,u=e||o.length-1;if(a==u)return o[a];for(;u>a;){if(u-a>D){var i=u-a+1,f=r-a+1,l=Math.log(i),h=q*Math.exp(2*l/3),v=q*Math.sqrt(l*h*(i-h)/i),d=Math.max(a,Math.floor(r-f*h/i+v)),p=Math.min(u,Math.floor(r+(i-f)*h/i+v));s(o,r,d,p)}var m=o[r],y=a,M=u;for(c(o,y,r),o[M]>m&&c(o,y,M);M>y;){for(c(o,y,M),y++,M--;o[y]<m;)y++;for(;o[M]>m;)M--}o[a]===m?c(o,a,M):(M++,c(o,M,u)),M>r?u=M-1:(a=M+1,u=M-1)}return o[r]}function c(t,r,n){var e=t[r];t[r]=t[n],t[n]=e}function f(t){var r=void 0;if(0==t.length)r=NaN;else{var n=t.length%2==0;n?(r=s(t,t.length/2),r+=s(t,t.length/2-1),r/=2):r=s(t,(t.length-1)/2)}return r}function l(t,r){if(void 0==r||r>1||0>r)throw new Error("p must be between zero and one inclusive.");if(void 0==t)throw new Error("need a list to provide a percentile.");if(0==t.length)return NaN;var n=Math.floor(t.length*r);return n>=t.length&&(n=t.length-1),s(t,n)}function h(t){if(void 0==t||0==t.length)throw new Error("you must provide an array.");for(var r=arguments.length,n=Array(r>1?r-1:0),e=1;r>e;e++)n[e-1]=arguments[e];var o=n.reduce(function(t,r){return r>=0&&1>=r&&t},!0);if(!o)throw new Error("quantiles must be between zero and one inclusive.");if(n.length>1)return n.map(function(r){return h(t,r)});var a=n[0];if(0==a)return t[0];if(1==a)return t[t.length-1];var u=t.length*a;return u%1?s(t,Math.floor(u)):t.length%2?s(t,u):(s(t,u-1)+s(t,u))/2}function v(t){return Math.max.apply(Math,g.toConsumableArray(t))-Math.min.apply(Math,g.toConsumableArray(t))}function d(t,r,n){if(0==t.length)return NaN;var e=function(){var e=u(t);return{v:t.reduce(function(t,o){var a=o-e;return n&&(a=Math.abs(a)),t+Math.pow(a,r)},0)}}();return"object"===("undefined"==typeof e?"undefined":g["typeof"](e))?e.v:void 0}function p(t){return 0==t.length?NaN:d(t,2)/t.length}function m(t){var r=p(t);return isNaN(r)?0:Math.sqrt(r)}function y(t){return(t+.5)*Math.log(t)-t+Math.log(2*Math.PI)/2}function M(t,r,n){return(t-r)/n}var g={};g["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},g.classCallCheck=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},g.createClass=function(){function t(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(r,n,e){return n&&t(r.prototype,n),e&&t(r,e),r}}(),g.inherits=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)},g.possibleConstructorReturn=function(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r},g.toConsumableArray=function(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)};var w=607/128,b=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],k=7,N=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],D=600,q=.5,C=14,E=function(){function t(r,n){var e=this;if(g.classCallCheck(this,t),this.pdf=function(t){return e.constructor.pmf(t,e.p,e.n)},this.cdf=function(t){return e.constructor.cdf(t,e.p,e.n)},this.random=function(){return e.constructor.random(e.p,e.n)},this.sample=function(t){return e.constructor.sample(t,e.p,e.n)},void 0==r||r>1||0>r)throw new Error("p must be between 0 and 1.");if(void 0==n||0>n)throw new Error("n must be positive or zero.");this.p=r,this.n=n,this.mu=this.constructor.mean(r,n),this.variance=this.constructor.variance(r,n),this.stdDev=this.constructor.stdDev(r,n),this.relStdDev=this.constructor.relativeStdDev(r,n),this.skewness=this.constructor.skewness(r,n),this.kurtosis=this.constructor.kurtosis(r,n)}return g.createClass(t,null,[{key:"mean",value:function(t,r){return r*t}},{key:"variance",value:function(t,r){return r*t*(1-t)}},{key:"stdDev",value:function(t,r){return Math.sqrt(r*t*(1-t))}},{key:"relativeStdDev",value:function(t,r){return Math.sqrt((1-t)/(r*t))}},{key:"skewness",value:function(t,r){return(1-2*t)/Math.sqrt(r*t*(1-t))}},{key:"kurtosis",value:function(t,r){return 3-6/r+1/(r*t*(1-t))}},{key:"random",value:function(t,r){if("number"!=typeof t||t>1||0>t)throw new Error("p must be between 0 and 1.");if("number"!=typeof r||0>r)throw new Error("n must be positive or zero.");if(0==r)return 0;var n=!1,e=0,o=void 0;t>.5?(n=!0,o=1-t):o=t;var a=1-o,u=o/a,i=r*o;if(C>i)for(var s=Math.pow(a,r),c=Math.random();r>=e&&c>=s;)c-=s,s*=u*(r-e)/(e+1),e++;else!function(){var t=i+o,n=Math.floor(t),u=n+.5,s=i*a,c=Math.floor(2.195*Math.sqrt(s)-4.6*a)+.5,f=u-c,l=u+c,h=.134+20.5/(15.3+n),v=c*(1+h+h),d=(t-f)/(t-f*o),p=d*(1+.5*d),m=(l-t)/(l*a),M=m*(1.5+m),g=v+h/p,w=g+h/M,b=void 0,k=void 0,N=void 0,D=void 0,q=function C(){if(N=Math.random()*w,D=Math.random(),c>=N)e=Math.floor(u-c*D+N);else if(v>=N){var t=f+(N-c)/h;D=D*h+1-Math.abs(t-u)/c,D>1||0>=D?C():e=t}else g>=N?(e=Math.floor(f+Math.log(D)/p),D*=(N-v)*p):(e=Math.floor(l-Math.log(D)/M),D*=(N-g)*M);b=Math.log(D);var i=e+1,s=r-e-1,d=n+1,m=r+1-n;k=u*Math.log(d/i)+(r-n+.5)*Math.log(m/s)+(e-n)*Math.log(s*o/(i*a))+y(d)+y(m)-y(i)-y(s),b>k&&C()};q()}();return Math.floor(n?r-e:e)}},{key:"sample",value:function(t,r,n){var e=this;return Array.apply(null,Array(t)).map(function(){return e.random(r,n)})}},{key:"pmf",value:function(t,n,e){if(0>t||t>e)return 0;var o=void 0;if(0==n)o=0==t?1:0;else{if(1!=n){var a=r(e,t),u=Math.pow(n,t)*Math.pow(1-n,e-t);return"Infinity"==a?0==u?0:a:a*u}o=t==e?1:0}return o}},{key:"cdf",value:function(t,n,e){if("number"!=typeof n||n>1||0>n)throw new Error("p must be between 0 and 1.");if("number"!=typeof e||0>e)throw new Error("n must be positive or zero.");return 0>t?0:Array.apply(null,Array(Math.floor(t))).map(function(t,o){return r(e,o)*Math.pow(n,o)*Math.pow(1-n,e-o)}).reduce(function(t,r){return t+r},0)}}]),t}();E.covariates=2,E.discrete=!0;var S=function(t){function r(t){g.classCallCheck(this,r);var n=g.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this,t,1));return n.pdf=function(t){return n.constructor.pmf(t,n.p)},n.cdf=function(t){return n.constructor.cdf(t,n.p)},n.random=function(){return n.constructor.random(n.p)},n.sample=function(t){return Array.apply(null,Array(t)).map(function(){return n.random()})},n}return g.inherits(r,t),g.createClass(r,null,[{key:"random",value:function(t){if(void 0==t||0>t||t>1)throw new Error("p must be between zero and one inclusive.");var r=Math.random();return t>r?1:0}},{key:"pmf",value:function(t,r){return 0==t?1-r:1==t?r:0}},{key:"cdf",value:function(t,r){return 1==t?1-r:0==t?r:NaN}}]),r}(E);S.covariates=1;var A=function(){function t(r){var n=this;if(g.classCallCheck(this,t),this.pdf=function(t){return n.constructor.pdf(t,n.df)},this.cdf=function(t){return n.constructor.cdf(t,n.df)},this.random=function(){return n.constructor.random(n.df)},this.sample=function(t){return Array.apply(null,Array(t)).map(function(){return n.random()})},r>=0)throw RangeError("df must be greater than zero.");this.df=r}return g.createClass(t,null,[{key:"random",value:function(t){throw new Error("not implemented.")}},{key:"pdf",value:function(t,r){return 0>=r?NaN:o((r+1)/2)/(Math.sqrt(Math.PI*r)*o(r/2)*Math.pow(Math.pow(1+t,2/r),-(r+1)/2))}},{key:"cdf",value:function(t,r){if(0>=r)return NaN;var n=void 0,e=void 0,o=void 0,a=void 0,u=void 0,i=void 0,s=void 0,c=void 0,f=void 0,l=void 0,h=1/Math.PI;if(o=r,n=t/Math.sqrt(o),e=o/(o+t*t),a=r-2,u=o%2,i=1,s=1,o=1,c=2+u,f=c,a>=2)for(l=c;a>=l;l+=2)s=s*e*(f-1)/f,i+=s,i!=o&&(o=i,f+=2);return 1!=u?.5+.5*n*Math.sqrt(e)*i:(1==r&&(i=0),.5+(n*e*i+Math.atan(n))*h)}}]),t}();A.covariates=1;var z=function(){function t(r){var n=this;if(g.classCallCheck(this,t),this.covariance=function(t){return n.constructor.covariance(n,t)},this.correlation=function(t){return n.constructor.correlation(n,t)},0==r.length)throw new Error("Sample of size 0 not allowed.");this.data=r,this.size=r.length,this.mean=u(r),this.std=this.constructor.stdDev(r),this.variance=this.constructor.variance(r),this.skewness=this.constructor.skewness(r),this.kurtosis=this.constructor.kurtosis(r),this.sqrdMeanDev=this.constructor.sqrdMeanDev(r),this.meanDev=this.constructor.meanDev(r),this.rootMeanSqrd=this.constructor.rootMeanSqrd(r),this.stdMeanDev=this.constructor.stdMeanDev(r),this.relStdDev=this.constructor.relativeStdDev(r),this.quartiles=this.constructor.quartiles(r)}return g.createClass(t,null,[{key:"variance",value:function(t){return d(t,2)/(t.length-1)}},{key:"sqrdMeanDev",value:function(t){return d(t,2)}},{key:"meanDev",value:function(t){return d(t,1,!0)/t.length}},{key:"stdDev",value:function(t){var r=this.variance(t);return isNaN(r)?0:Math.sqrt(r)}},{key:"rootMeanSqrd",value:function(t){return Math.sqrt(t.map(function(t){return t*t}).reduce(function(t,r){return t+r})/t.length)}},{key:"stdMeanDev",value:function(t){return this.stdDev(t)/Math.sqrt(t.length)}},{key:"relativeStdDev",value:function(t){return this.stdDev(t)/u(t)}},{key:"quartiles",value:function(t){return h(t,.25,.5,.75)}},{key:"skewness",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var n=t.length,e=Math.pow(r,3),o=d(t,3);return n*o/((n-1)*(n-2)*e)}},{key:"kurtosis",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var n=(t.length,d(t,2)),e=d(t,4);return e/Math.pow(n,2)}},{key:"covariance",value:function(t,r){if(!t||!r||t.size<=1||t.size!==r.size)return NaN;var n=t.data.map(function(n,e){return(t.data[e]-t.mean)*(r.data[e]-r.mean)}).reduce(function(t,r){return t+r},0);return n/(t.size-1)}},{key:"correlation",value:function(t,r){if(!(t&&t.std&&r&&r.std))return NaN;var n=this.covariance(t,r);return n/t.std/r.std}}]),t}();t.choose=r,t.factorial=n,t.gamma=o,t.lngamma=e,t.median=f,t.mean=u,t.mode=i,t.percentile=l,t.quantile=h,t.range=v,t.select=s,t.std=m,t.stirling=y,t.sum=a,t.sumNthPowerDev=d,t.variance=p,t.zscore=M,t.Binomial=E,t.Bernoulli=S,t.StudentsT=A,t.Sample=z,t.tTest=tTest});