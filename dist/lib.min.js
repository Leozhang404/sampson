!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.probably=t.probably||{})}(this,function(t){"use strict";function r(t,r){if(r>t)return NaN;for(var n=1,e=1;r>=e;e++)n*=t--,n/=e;return n}function n(t){return 0>t?NaN:0==t?1:t*n(t-1)}function e(t){if(0>t)return NaN;for(var r=N[0],n=N.length-1;n>0;--n)r+=N[n]/(t+n);var e=t+w+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(e)-e+Math.log(r)-Math.log(t)}function a(t){var r=t;if(0>r&&r%1==0)return 1/0;if(.5>r)return Math.PI/(Math.sin(Math.PI*r)*a(1-r));if(r>100)return Math.exp(e(r));r-=1;for(var n=C[0],o=1;k+2>o;o++)n+=C[o]/(r+o);var i=r+k+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,r+.5)*Math.exp(-i)*n}function o(t){if(0==t.length)return 0;var r=0;return t.reduce(function(t,n){var e=n-r,a=t+e;return r=a-t-e,a},0)}function i(t){return 0==t.length?NaN:o(t)/t.length}function u(t){if(0==t.length)return NaN;if(1==t.length)return t;var r=function(){var r=t.reduce(function(t,r){return t[r]?t[r]++:t[r]=1,t},{}),n=Object.keys(r),e=n.map(function(t){return r[t]}).reduce(function(t,r){return r>t?r:t});return{v:n.filter(function(t){return r[t]==e}).map(function(t){return Number(t)})}}();return"object"===("undefined"==typeof r?"undefined":b["typeof"](r))?r.v:void 0}function s(t,r,n,e){var a=t.slice(0);if(0==a.length||r>=a.length)return NaN;var o=n||0,i=e||a.length-1;if(o==i)return a[o];for(;i>o;){if(i-o>z){var u=i-o+1,f=r-o+1,h=Math.log(u),l=q*Math.exp(2*h/3),v=q*Math.sqrt(h*l*(u-l)/u),d=Math.max(o,Math.floor(r-f*l/u+v)),p=Math.min(i,Math.floor(r+(u-f)*l/u+v));s(a,r,d,p)}var m=a[r],y=o,M=i;for(c(a,y,r),a[M]>m&&c(a,y,M);M>y;){for(c(a,y,M),y++,M--;a[y]<m;)y++;for(;a[M]>m;)M--}a[o]===m?c(a,o,M):(M++,c(a,M,i)),M>r?i=M-1:(o=M+1,i=M-1)}return a[r]}function c(t,r,n){var e=t[r];t[r]=t[n],t[n]=e}function f(t){var r=void 0;if(0==t.length)r=NaN;else{var n=t.length%2==0;n?(r=s(t,t.length/2),r+=s(t,t.length/2-1),r/=2):r=s(t,(t.length-1)/2)}return r}function h(t,r){if(void 0==r||r>1||0>r)throw new Error("p must be between zero and one inclusive.");if(void 0==t)throw new Error("need a list to provide a percentile.");if(0==t.length)return NaN;var n=Math.floor(t.length*r);return n>=t.length&&(n=t.length-1),s(t,n)}function l(t){if(void 0==t||0==t.length)throw new Error("you must provide an array.");for(var r=arguments.length,n=Array(r>1?r-1:0),e=1;r>e;e++)n[e-1]=arguments[e];var a=n.reduce(function(t,r){return r>=0&&1>=r&&t},!0);if(!a)throw new Error("quantiles must be between zero and one inclusive.");if(n.length>1)return n.map(function(r){return l(t,r)});var o=n[0];if(0==o)return t[0];if(1==o)return t[t.length-1];var i=t.length*o;return i%1?s(t,Math.floor(i)):t.length%2?s(t,i):(s(t,i-1)+s(t,i))/2}function v(t){return Math.max.apply(Math,b.toConsumableArray(t))-Math.min.apply(Math,b.toConsumableArray(t))}function d(t,r,n){if(0==t.length)return NaN;var e=function(){var e=i(t);return{v:t.reduce(function(t,a){var o=a-e;return n&&(o=Math.abs(o)),t+Math.pow(o,r)},0)}}();return"object"===("undefined"==typeof e?"undefined":b["typeof"](e))?e.v:void 0}function p(t){return 0==t.length?NaN:d(t,2)/t.length}function m(t){var r=p(t);return isNaN(r)?0:Math.sqrt(r)}function y(t){return(t+.5)*Math.log(t)-t+Math.log(2*Math.PI)/2}function M(t,r,n){return(t-r)/n}function g(t,r,n){if(!t)return NaN;if(r){var e=n||0,a=((t.size-1)*t.variance+(r.size-1)*r.variance)/(t.size+r.size-2);return(t.mean-r.mean-e)/Math.sqrt(a*(1/t.size+1/r.size))}return(t.mean-n)/(t.std/Math.sqrt(t.size))}var b={};b["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},b.classCallCheck=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},b.createClass=function(){function t(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(r,n,e){return n&&t(r.prototype,n),e&&t(r,e),r}}(),b.inherits=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)},b.possibleConstructorReturn=function(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r},b.toConsumableArray=function(t){if(Array.isArray(t)){for(var r=0,n=Array(t.length);r<t.length;r++)n[r]=t[r];return n}return Array.from(t)};var w=607/128,N=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],k=7,C=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],z=600,q=.5,D=Object.freeze({choose:r,factorial:n,gamma:a,lngamma:e,median:f,mean:i,mode:u,percentile:h,quantile:l,range:v,select:s,std:m,stirling:y,sum:o,sumNthPowerDev:d,variance:p,zscore:M}),A=function(){function t(r,n){var e=this;b.classCallCheck(this,t),this.pdf=function(t){return e.constructor.pdf(t,e.a,e.b)},this.random=function(){return e.constructor.random(e.a,e.b)},this.sample=function(t){return Array.apply(null,Array(t)).map(function(){return e.random()})},this.a=r,this.b=n,this.mu=r/n,this.variance=r/(n*n)}return b.createClass(t,null,[{key:"random",value:function(t,r){return console.log("this is wrong")}},{key:"pmf",value:function(t,r,n){return 0>t?0:0==t?1==r?1/n:0:1==r?Math.exp(-t/n)/n:Math.exp((r-1)*Math.log(t/n)-t/n-e(r))/n}}]),t}();A.covariates=2,A.discrete=!1;var E=NaN,P=function(){function t(r,n){var e=this;if(b.classCallCheck(this,t),this.pdf=function(t){return e.constructor.pdf(t,e.mu,e.sigma)},this.random=function(){return e.constructor.random(e.mu,e.sigma)},this.sample=function(t){return Array.apply(null,Array(t)).map(function(){return e.random()})},!r||!n)throw new Error("Need mu and sigma for the normal distribution.");this.mu=r,this.sigma=n,this.variance=n*n}return b.createClass(t,null,[{key:"random",value:function(t,r){if(!t||!r)throw new Error("Need mu and sigma for the normal distribution.");var n=E;if(E=NaN,!n){var e=2*Math.random()*Math.PI,a=Math.sqrt(-2*Math.log(1-Math.random()));n=Math.cos(e)*a,E=Math.sin(e)*a}return t+n*r}},{key:"pdf",value:function(t,r,n){t/Math.abs(n);return 1/(Math.sqrt(2*Math.PI)*Math.abs(n))*Math.exp(-1*Math.pow(t-r,2)/(2*n*n))}}]),t}();P.covariates=2,P.discrete=!1;var j=function(){function t(r){var n=this;if(b.classCallCheck(this,t),this.pdf=function(t){return n.constructor.pdf(t,n.a)},this.random=function(){return n.constructor.random(n.a)},this.sample=function(t){return Array.apply(null,Array(t)).map(function(){return n.random()})},void 0==r||0>=r)throw new Error("a must be positive and greater than zero.");this.a=r}return b.createClass(t,null,[{key:"random",value:function(t){if(void 0==t||0>=t)throw new Error("a must be positive and greater than zero.");for(var r=void 0;!r||.5==r;)r=Math.random();return t*Math.tan(Math.PI*r)}},{key:"pdf",value:function(t,r){var n=t/r;return 1/(Math.PI*r)/(1+n*n)}}]),t}();j.covariates=1,j.discrete=!1;var S=14,x=function(){function t(r,n){if(b.classCallCheck(this,t),O.call(this),void 0==r||r>1||0>r)throw new Error("p must be between 0 and 1.");if(void 0==n||0>n)throw new Error("n must be positive or zero.");this.p=r,this.n=n,this.mu=n*r,this.variance=n*r*(1-r)}return b.createClass(t,null,[{key:"random",value:function(t,r){if("number"!=typeof t||t>1||0>t)throw new Error("p must be between 0 and 1.");if("number"!=typeof r||0>r)throw new Error("n must be positive or zero.");if(0==r)return 0;var n=!1,e=0,a=void 0;t>.5?(n=!0,a=1-t):a=t;var o=1-a,i=a/o,u=r*a;if(S>u)for(var s=Math.pow(o,r),c=Math.random();r>=e&&c>=s;)c-=s,s*=i*(r-e)/(e+1),e++;else!function(){var t=u+a,n=Math.floor(t),i=n+.5,s=u*o,c=Math.floor(2.195*Math.sqrt(s)-4.6*o)+.5,f=i-c,h=i+c,l=.134+20.5/(15.3+n),v=c*(1+l+l),d=(t-f)/(t-f*a),p=d*(1+.5*d),m=(h-t)/(h*o),M=m*(1.5+m),g=v+l/p,b=g+l/M,w=void 0,N=void 0,k=void 0,C=void 0,z=function q(){if(k=Math.random()*b,C=Math.random(),c>=k)e=Math.floor(i-c*C+k);else if(v>=k){var t=f+(k-c)/l;C=C*l+1-Math.abs(t-i)/c,C>1||0>=C?q():e=t}else g>=k?(e=Math.floor(f+Math.log(C)/p),C*=(k-v)*p):(e=Math.floor(h-Math.log(C)/M),C*=(k-g)*M);w=Math.log(C);var u=e+1,s=r-e-1,d=n+1,m=r+1-n;N=i*Math.log(d/u)+(r-n+.5)*Math.log(m/s)+(e-n)*Math.log(s*a/(u*o))+y(d)+y(m)-y(u)-y(s),w>N&&q()};z()}();return Math.floor(n?r-e:e)}},{key:"pmf",value:function(t,n,e){if(0>t||t>e)return 0;var a=void 0;if(0==n)a=0==t?1:0;else{if(1!=n){var o=r(e,t),i=Math.pow(n,t)*Math.pow(1-n,e-t);return"Infinity"==o?0==i?0:o:o*i}a=t==e?1:0}return a}}]),t}();x.covariates=2,x.discrete=!0;var O=function(){var t=this;this.pdf=function(r){return t.constructor.pmf(r,t.p,t.n)},this.random=function(){return t.constructor.random(t.p,t.n)},this.sample=function(r){return Array.apply(null,Array(r)).map(function(){return t.random()})}},I=function(t){function r(t){b.classCallCheck(this,r);var n=b.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this,t,1));return n.pdf=function(t){return n.constructor.pmf(t,n.p)},n.random=function(){return n.constructor.random(n.p)},n.sample=function(t){return Array.apply(null,Array(t)).map(function(){return n.random()})},n}return b.inherits(r,t),b.createClass(r,null,[{key:"random",value:function(t){if(void 0==t||0>t||t>1)throw new Error("p must be between zero and one inclusive.");var r=Math.random();return t>r?1:0}},{key:"pmf",value:function(t,r){return 0==t?1-r:1==t?r:0}}]),r}(x);I.covariates=1;var _=Object.freeze({Normal:P,Binomial:x,Bernoulli:I,Cauchy:j,Gamma:A}),R=function(){function t(r){var n=this;if(b.classCallCheck(this,t),this.covariance=function(t){return n.constructor.covariance(n,t)},this.correlation=function(t){return n.constructor.correlation(n,t)},0==r.length)throw new Error("Sample of size 0 not allowed.");this.data=r,this.size=r.length,this.mean=i(r),this.std=this.constructor.stdDev(r),this.variance=this.constructor.variance(r),this.skewness=this.constructor.skewness(r),this.kurtosis=this.constructor.kurtosis(r),this.sqrdMeanDev=this.constructor.sqrdMeanDev(r),this.meanDev=this.constructor.meanDev(r),this.rootMeanSqrd=this.constructor.rootMeanSqrd(r),this.stdMeanDev=this.constructor.stdMeanDev(r),this.relStdDev=this.constructor.relativeStdDev(r),this.quartiles=this.constructor.quartiles(r)}return b.createClass(t,null,[{key:"variance",value:function(t){return d(t,2)/(t.length-1)}},{key:"sqrdMeanDev",value:function(t){return d(t,2)}},{key:"meanDev",value:function(t){return d(t,1,!0)/t.length}},{key:"stdDev",value:function(t){var r=this.variance(t);return isNaN(r)?0:Math.sqrt(r)}},{key:"rootMeanSqrd",value:function(t){return Math.sqrt(t.map(function(t){return t*t}).reduce(function(t,r){return t+r})/t.length)}},{key:"stdMeanDev",value:function(t){return this.stdDev(t)/Math.sqrt(t.length)}},{key:"relativeStdDev",value:function(t){return this.stdDev(t)/i(t)}},{key:"quartiles",value:function(t){return l(t,.25,.5,.75)}},{key:"skewness",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var n=t.length,e=Math.pow(r,3),a=d(t,3);return n*a/((n-1)*(n-2)*e)}},{key:"kurtosis",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var n=(t.length,d(t,2)),e=d(t,4);return e/Math.pow(n,2)}},{key:"covariance",value:function(t,r){if(!t||!r||t.size<=1||t.size!==r.size)return NaN;var n=t.data.map(function(n,e){return(t.data[e]-t.mean)*(r.data[e]-r.mean)}).reduce(function(t,r){return t+r},0);return n/(t.size-1)}},{key:"correlation",value:function(t,r){if(!(t&&t.std&&r&&r.std))return NaN;var n=this.covariance(t,r);return n/t.std/r.std}}]),t}(),T=Object.freeze({Sample:R,tTest:g});t.distributions=_,t.statistics=T,t.utils=D});