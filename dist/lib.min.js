!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(t.probably=t.probably||{})}(this,function(t){"use strict";function r(t,r){if(r>t)return NaN;for(var e=1,n=1;r>=n;n++)e*=t--,e/=n;return e}function e(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-(t*t)-1.26551223+1.00002368*r+.37409196*Math.pow(r,2)+.09678418*Math.pow(r,3)-.18628806*Math.pow(r,4)+.27886807*Math.pow(r,5)-1.13520398*Math.pow(r,6)+1.48851587*Math.pow(r,7)-.82215223*Math.pow(r,8)+.17087277*Math.pow(r,9));return t>=0?1-e:e-1}function n(t){return 0>t?NaN:0==t?1:t*n(t-1)}function o(t){if(0>t)return NaN;for(var r=k[0],e=k.length-1;e>0;--e)r+=k[e]/(t+e);var n=t+N+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(r)-Math.log(t)}function a(t){var r=t;if(0>r&&r%1==0)return 1/0;if(.5>r)return Math.PI/(Math.sin(Math.PI*r)*a(1-r));if(r>100)return Math.exp(o(r));r-=1;for(var e=C[0],n=1;q+2>n;n++)e+=C[n]/(r+n);var u=r+q+.5;return Math.sqrt(2*Math.PI)*Math.pow(u,r+.5)*Math.exp(-u)*e}function u(t){if(0==t.length)return 0;var r=0;return t.reduce(function(t,e){var n=e-r,o=t+n;return r=o-t-n,o},0)}function i(t){return 0==t.length?NaN:u(t)/t.length}function s(t){if(0==t.length)return NaN;if(1==t.length)return t;var r=function(){var r=t.reduce(function(t,r){return t[r]?t[r]++:t[r]=1,t},{}),e=Object.keys(r),n=e.map(function(t){return r[t]}).reduce(function(t,r){return r>t?r:t});return{v:e.filter(function(t){return r[t]==n}).map(function(t){return Number(t)})}}();return"object"===("undefined"==typeof r?"undefined":g["typeof"](r))?r.v:void 0}function c(t,r,e,n){var o=t.slice(0);if(0==o.length||r>=o.length)return NaN;var a=e||0,u=n||o.length-1;if(a==u)return o[a];for(;u>a;){if(u-a>O){var i=u-a+1,s=r-a+1,l=Math.log(i),h=E*Math.exp(2*l/3),v=E*Math.sqrt(l*h*(i-h)/i),d=Math.max(a,Math.floor(r-s*h/i+v)),p=Math.min(u,Math.floor(r+(i-s)*h/i+v));c(o,r,d,p)}var m=o[r],y=a,M=u;for(f(o,y,r),o[M]>m&&f(o,y,M);M>y;){for(f(o,y,M),y++,M--;o[y]<m;)y++;for(;o[M]>m;)M--}o[a]===m?f(o,a,M):(M++,f(o,M,u)),M>r?u=M-1:(a=M+1,u=M-1)}return o[r]}function f(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function l(t){var r=void 0;if(0==t.length)r=NaN;else{var e=t.length%2==0;e?(r=c(t,t.length/2),r+=c(t,t.length/2-1),r/=2):r=c(t,(t.length-1)/2)}return r}function h(t,r){if(void 0==r||r>1||0>r)throw new Error("p must be between zero and one inclusive.");if(void 0==t)throw new Error("need a list to provide a percentile.");if(0==t.length)return NaN;var e=Math.floor(t.length*r);return e>=t.length&&(e=t.length-1),c(t,e)}function v(t,r){if(!Array.isArray(t)||0==t.length)throw new Error("you must provide an array.");if(!Array.isArray(r)||0==r.length)throw new Error("you must provide some quantiles.");var e=r.reduce(function(t,r){return r>=0&&1>=r&&t},!0);if(!e)throw new Error("quantiles must be between zero and one inclusive.");if(r.length>1)return r.map(function(r){return v(t,[r])});var n=r[0];if(0==n)return t[0];if(1==n)return t[t.length-1];var o=t.length*n;return o%1?c(t,Math.floor(o)):t.length%2?c(t,o):(c(t,o-1)+c(t,o))/2}function d(t){return 0==t.length?NaN:Math.max.apply(Math,g.toConsumableArray(t))-Math.min.apply(Math,g.toConsumableArray(t))}function p(t,r,e){if(0==t.length)return NaN;var n=function(){var n=i(t);return{v:t.reduce(function(t,o){var a=o-n;return e&&(a=Math.abs(a)),t+Math.pow(a,r)},0)}}();return"object"===("undefined"==typeof n?"undefined":g["typeof"](n))?n.v:void 0}function m(t){return 0==t.length?NaN:p(t,2)/t.length}function y(t){var r=m(t);return isNaN(r)?0:Math.sqrt(r)}function M(t){return(t+.5)*Math.log(t)-t+Math.log(2*Math.PI)/2}function b(t,r,e){return(t-r)/e}function w(t,r,e){if(!t)return NaN;if(r){var n=e||0,o=((t.size-1)*t.variance+(r.size-1)*r.variance)/(t.size+r.size-2);return(t.mean-r.mean-n)/Math.sqrt(o*(1/t.size+1/r.size))}return(t.mean-e)/(t.std/Math.sqrt(t.size))}var g={};g["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},g.classCallCheck=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},g.createClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),g.get=function R(t,r,e){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:R(o,r,e)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(e)},g.inherits=function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)},g.possibleConstructorReturn=function(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r},g.toConsumableArray=function(t){if(Array.isArray(t)){for(var r=0,e=Array(t.length);r<t.length;r++)e[r]=t[r];return e}return Array.from(t)};var N=607/128,k=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],q=7,C=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],O=600,E=.5,D=function(){function t(){g.classCallCheck(this,t)}return g.createClass(t,null,[{key:"random",value:function(){return Math.random()}}]),t}();D.covariates=0,D.discrete=!1;var P=NaN,z=function(t){function r(t,e){if(g.classCallCheck(this,r),"number"!=typeof t||"number"!=typeof e)throw new Error("Need mu and sigma for the normal distribution.");var n=g.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return n.pdf=function(t){return n.constructor.pdf(t,n.mu,n.sigma)},n.cdf=function(t){return n.constructor.cdf(t,n.mu,n.sigma)},n.random=function(){return n.constructor.random(n.mu,n.sigma)},n.sample=function(t){return n.constructor.sample(t,n.mu,n.sigma)},n.mu=t,n.sigma=e,n.variance=e*e,n}return g.inherits(r,t),g.createClass(r,null,[{key:"random",value:function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new Error("Need mu and sigma for the normal distribution.");var n=P;if(P=NaN,!n){var o=2*g.get(Object.getPrototypeOf(r),"random",this).call(this)*Math.PI,a=Math.sqrt(-2*Math.log(1-g.get(Object.getPrototypeOf(r),"random",this).call(this)));n=Math.cos(o)*a,P=Math.sin(o)*a}return t+n*e}},{key:"sample",value:function(t,r,e){var n=this;return Array.apply(null,Array(t)).map(function(){return n.random(r,e)})}},{key:"pdf",value:function(t,r,e){if("number"!=typeof t)throw new Error("x must be a number.");if("number"!=typeof r||"number"!=typeof e)throw new Error("Need mu and sigma for the normal distribution.");t/Math.abs(e);return 1/(Math.sqrt(2*Math.PI)*Math.abs(e))*Math.exp(-1*Math.pow(t-r,2)/(2*e*e))}},{key:"cdf",value:function(t,r,n){if("number"!=typeof t)throw new Error("x must be a number.");if("number"!=typeof r||"number"!=typeof n)throw new Error("Need mu and sigma for the normal distribution.");return.5*(1+e((t-r)/(n*Math.sqrt(2))))}}]),r}(D);z.covariates=2,z.discrete=!1;var A=14,j=function(t){function e(t,r){if(g.classCallCheck(this,e),void 0==t||t>1||0>t)throw new Error("p must be between 0 and 1.");if(void 0==r||0>r)throw new Error("n must be positive or zero.");var n=g.possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));return n.pdf=function(t){return n.constructor.pmf(t,n.p,n.n)},n.cdf=function(t){return n.constructor.cdf(t,n.p,n.n)},n.random=function(){return n.constructor.random(n.p,n.n)},n.sample=function(t){return n.constructor.sample(t,n.p,n.n)},n.p=t,n.n=r,n.mu=n.constructor.mean(t,r),n.variance=n.constructor.variance(t,r),n.stdDev=n.constructor.stdDev(t,r),n.relStdDev=n.constructor.relativeStdDev(t,r),n.skewness=n.constructor.skewness(t,r),n.kurtosis=n.constructor.kurtosis(t,r),n}return g.inherits(e,t),g.createClass(e,null,[{key:"mean",value:function(t,r){return r*t}},{key:"variance",value:function(t,r){return r*t*(1-t)}},{key:"stdDev",value:function(t,r){return Math.sqrt(r*t*(1-t))}},{key:"relativeStdDev",value:function(t,r){return Math.sqrt((1-t)/(r*t))}},{key:"skewness",value:function(t,r){return(1-2*t)/Math.sqrt(r*t*(1-t))}},{key:"kurtosis",value:function(t,r){return 3-6/r+1/(r*t*(1-t))}},{key:"random",value:function(t,r){var n=this;if("number"!=typeof t||t>1||0>t)throw new Error("p must be between 0 and 1.");if("number"!=typeof r||0>r)throw new Error("n must be positive or zero.");if(0==r)return 0;var o=!1,a=0,u=void 0;t>.5?(o=!0,u=1-t):u=t;var i=1-u,s=u/i,c=r*u;if(A>c)for(var f=Math.pow(i,r),l=g.get(Object.getPrototypeOf(e),"random",this).call(this);r>=a&&l>=f;)l-=f,f*=s*(r-a)/(a+1),a++;else!function(){var t=c+u,o=Math.floor(t),s=o+.5,f=c*i,l=Math.floor(2.195*Math.sqrt(f)-4.6*i)+.5,h=s-l,v=s+l,d=.134+20.5/(15.3+o),p=l*(1+d+d),m=(t-h)/(t-h*u),y=m*(1+.5*m),b=(v-t)/(v*i),w=b*(1.5+b),N=p+d/y,k=N+d/w,q=void 0,C=void 0,O=void 0,E=void 0,D=function P(){if(O=g.get(Object.getPrototypeOf(e),"random",n).call(n)*k,E=g.get(Object.getPrototypeOf(e),"random",n).call(n),l>=O)a=Math.floor(s-l*E+O);else if(p>=O){var t=h+(O-l)/d;E=E*d+1-Math.abs(t-s)/l,E>1||0>=E?P():a=t}else N>=O?(a=Math.floor(h+Math.log(E)/y),E*=(O-p)*y):(a=Math.floor(v-Math.log(E)/w),E*=(O-N)*w);q=Math.log(E);var c=a+1,f=r-a-1,m=o+1,b=r+1-o;C=s*Math.log(m/c)+(r-o+.5)*Math.log(b/f)+(a-o)*Math.log(f*u/(c*i))+M(m)+M(b)-M(c)-M(f),q>C&&P()};D()}();return Math.floor(o?r-a:a)}},{key:"sample",value:function(t,r,e){var n=this;return Array.apply(null,Array(t)).map(function(){return n.random(r,e)})}},{key:"pmf",value:function(t,e,n){if(0>t||t>n)return 0;var o=void 0;if(0==e)o=0==t?1:0;else{if(1!=e){var a=r(n,t),u=Math.pow(e,t)*Math.pow(1-e,n-t);return"Infinity"==a?0==u?0:a:a*u}o=t==n?1:0}return o}},{key:"cdf",value:function(t,e,n){if("number"!=typeof e||e>1||0>e)throw new Error("p must be between 0 and 1.");if("number"!=typeof t)throw new Error("k must be a number.");if("number"!=typeof n||0>n)throw new Error("n must be positive or zero.");return 0>t?0:t>n?1:Array.apply(null,Array(Math.floor(t)+1)).map(function(t,o){return r(n,o)*Math.pow(e,o)*Math.pow(1-e,n-o)}).reduce(function(t,r){return t+r},0)}}]),e}(D);j.covariates=2,j.discrete=!0;var S=function(t){function r(t){g.classCallCheck(this,r);var e=g.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this,t,1));return e.pdf=function(t){return e.constructor.pmf(t,e.p)},e.cdf=function(t){return e.constructor.cdf(t,e.p)},e.random=function(){return e.constructor.random(e.p)},e.sample=function(t){return Array.apply(null,Array(t)).map(function(){return e.random()})},e}return g.inherits(r,t),g.createClass(r,null,[{key:"random",value:function(t){if(void 0==t||0>t||t>1)throw new Error("p must be between zero and one inclusive.");var r=D.random();return t>r?1:0}},{key:"pmf",value:function(t,r){return 0==t?1-r:1==t?r:0}},{key:"cdf",value:function(t,r){if("number"!=typeof r||r>1||0>r)throw new Error("p must be between zero and one inclusive.");if("number"!=typeof t)throw new Error("k must be a number.");return 1==t?r:0==t?1-r:NaN}}]),r}(j);S.covariates=1;var x=function(t){function r(t){if(g.classCallCheck(this,r),t>=0)throw RangeError("df must be greater than zero.");var e=g.possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return e.pdf=function(t){return e.constructor.pdf(t,e.df)},e.cdf=function(t){return e.constructor.cdf(t,e.df)},e.random=function(){return e.constructor.random(e.df)},e.sample=function(t){return Array.apply(null,Array(t)).map(function(){return e.random()})},e.df=t,e}return g.inherits(r,t),g.createClass(r,null,[{key:"random",value:function(t){throw new Error("not implemented.")}},{key:"pdf",value:function(t,r){return 0>=r?NaN:a((r+1)/2)/(Math.sqrt(Math.PI*r)*a(r/2)*Math.pow(Math.pow(1+t,2/r),-(r+1)/2))}},{key:"cdf",value:function(t,r){if(0>=r)return NaN;var e=void 0,n=void 0,o=void 0,a=void 0,u=void 0,i=void 0,s=void 0,c=void 0,f=void 0,l=void 0,h=1/Math.PI;if(o=r,e=t/Math.sqrt(o),n=o/(o+t*t),a=r-2,u=o%2,i=1,s=1,o=1,c=2+u,f=c,a>=2)for(l=c;a>=l;l+=2)s=s*n*(f-1)/f,i+=s,i!=o&&(o=i,f+=2);return 1!=u?.5+.5*e*Math.sqrt(n)*i:(1==r&&(i=0),.5+(e*n*i+Math.atan(e))*h)}}]),r}(D);x.covariates=1;var I=function(){function t(r){var e=this;if(g.classCallCheck(this,t),this.covariance=function(t){return e.constructor.covariance(e,t)},this.correlation=function(t){return e.constructor.correlation(e,t)},0==r.length)throw new Error("Sample of size 0 not allowed.");this.data=r,this.size=r.length,this.mean=i(r),this.std=this.constructor.stdDev(r),this.variance=this.constructor.variance(r),this.skewness=this.constructor.skewness(r),this.kurtosis=this.constructor.kurtosis(r),this.sqrdMeanDev=this.constructor.sqrdMeanDev(r),this.meanDev=this.constructor.meanDev(r),this.rootMeanSqrd=this.constructor.rootMeanSqrd(r),this.stdMeanDev=this.constructor.stdMeanDev(r),this.relStdDev=this.constructor.relativeStdDev(r),this.quartiles=this.constructor.quartiles(r)}return g.createClass(t,null,[{key:"variance",value:function(t){return p(t,2)/(t.length-1)}},{key:"sqrdMeanDev",value:function(t){return p(t,2)}},{key:"meanDev",value:function(t){return p(t,1,!0)/t.length}},{key:"stdDev",value:function(t){var r=this.variance(t);return isNaN(r)?0:Math.sqrt(r)}},{key:"rootMeanSqrd",value:function(t){return Math.sqrt(t.map(function(t){return t*t}).reduce(function(t,r){return t+r})/t.length)}},{key:"stdMeanDev",value:function(t){return this.stdDev(t)/Math.sqrt(t.length)}},{key:"relativeStdDev",value:function(t){return this.stdDev(t)/i(t)}},{key:"quartiles",value:function(t){return v(t,[.25,.5,.75])}},{key:"skewness",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var e=t.length,n=Math.pow(r,3),o=p(t,3);return e*o/((e-1)*(e-2)*n)}},{key:"kurtosis",value:function(t){var r=this.stdDev(t);if(isNaN(r)||t.length<3)return NaN;var e=(t.length,p(t,2)),n=p(t,4);return n/Math.pow(e,2)}},{key:"covariance",value:function(t,r){if(!t||!r||t.size<=1||t.size!==r.size)return NaN;var e=t.data.map(function(e,n){return(t.data[n]-t.mean)*(r.data[n]-r.mean)}).reduce(function(t,r){return t+r},0);return e/(t.size-1)}},{key:"correlation",value:function(t,r){if(!(t&&t.std&&r&&r.std))return NaN;var e=this.covariance(t,r);return e/t.std/r.std}}]),t}();t.choose=r,t.error=e,t.factorial=n,t.gamma=a,t.lngamma=o,t.median=l,t.mean=i,t.mode=s,t.percentile=h,t.quantile=v,t.range=d,t.select=c,t.std=y,t.stirling=M,t.sum=u,t.sumNthPowerDev=p,t.variance=m,t.zscore=b,t.Normal=z,t.Binomial=j,t.Bernoulli=S,t.StudentsT=x,t.Sample=I,t.ttest=w});